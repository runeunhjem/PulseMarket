<!DOCTYPE html>
<html lang="en">
  <%- include("partials/head", { title: "Manage Categories", cssFile: "adminCategories" }) %>
  <body class="d-flex flex-column min-vh-100">
    <%- include("partials/navbar") %>

    <main class="container my-5">
      <h1 class="text-warning mb-4"><i class="bi bi-tags"></i> Manage Categories</h1>

      <div class="mb-3 text-end">
        <button class="btn btn-success add-btn" data-bs-toggle="modal" data-bs-target="#addCategoryModal">
          <i class="bi bi-plus-circle me-1"></i> Add Category
        </button>
      </div>

      <div class="table-responsive">
        <table class="table table-dark table-striped admin-categories-table">
          <thead class="table-warning text-dark">
            <tr>
              <th>ID</th>
              <th>Name</th>
              <th>Created</th>
              <th>Updated</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <% categories.forEach(category => { %>
              <tr>
                <td><%= category.id %></td>
                <td><%= category.name %></td>
                <td><%= new Date(category.createdAt).toLocaleDateString() %></td>
                <td><%= new Date(category.updatedAt).toLocaleDateString() %></td>
                <td>
                  <button
                    class="btn btn-sm btn-primary"
                    data-id="<%= category.id %>"
                    data-name="<%= category.name %>"
                    data-bs-toggle="modal"
                    data-bs-target="#editCategoryModal">
                    <i class="bi bi-pencil-square"></i>
                  </button>
                  <button
                    class="btn btn-sm btn-danger delete-category-btn"
                    data-id="<%= category.id %>"
                    data-name="<%= category.name %>">
                    <i class="bi bi-trash"></i>
                  </button>
                </td>
              </tr>
            <% }) %>
          </tbody>
        </table>
      </div>
    </main>

    <%- include("partials/footer") %>
    <script src="/javascripts/adminCategories.js" type="module"></script>
    <button id="back-to-top" class="back-to-top" aria-label="Back to top" title="Back to top">
      <i class="bi bi-arrow-up-short"></i>
      <span class="visually-hidden">Back to top</span>
    </button>
    <%- include("partials/warningModal") %>
    <%- include("partials/confirmModal") %>
    <%- include("categories/modals") %>
  </body>
</html>
